# ç”»åƒã‚·ã‚§ã‚¢æ©Ÿèƒ½ï¼ˆShare as Imageï¼‰

## æ¦‚è¦

æŠ•ç¨¿ã‚«ãƒ¼ãƒ‰ã‚„ãƒ¯ãƒ¼ãƒ‰ãƒ­ãƒƒãƒˆåˆæˆçµæœã®ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚’ç”»åƒåŒ–ã—ã¦SNSã«ã‚·ã‚§ã‚¢ã™ã‚‹æ©Ÿèƒ½ã€‚

## èƒŒæ™¯ãƒ»ç›®çš„

- **è¦–èªæ€§**: ãƒ†ã‚­ã‚¹ãƒˆã®URLã ã‘ã§ã¯ä¼ã‚ã‚‰ãªã„ã€è¦–è¦šçš„ãªé­…åŠ›ã‚’ã‚·ã‚§ã‚¢
- **ã‚µãƒ¼ãƒ“ã‚¹å®£ä¼**: ç”»åƒã¨å…±ã«MY PACEã®URLã‚’å«ã‚ã‚‹ã“ã¨ã§ã€ã‚µãƒ¼ãƒ“ã‚¹ã¸ã®å°ç·šã‚’ç¢ºä¿
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼æº€è¶³åº¦**: é”æˆæ„Ÿã‚’å…±æœ‰ã—ã‚„ã™ãã—ã€ã‚²ãƒ¼ãƒŸãƒ•ã‚£ã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¦ç´ ã‚’å¼·åŒ–

## å¯¾è±¡ã‚³ãƒ³ãƒ†ãƒ³ãƒ„

### 1. æŠ•ç¨¿ã‚«ãƒ¼ãƒ‰ï¼ˆPost Cardï¼‰

æŠ•ç¨¿ã‚«ãƒ¼ãƒ‰å…¨ä½“ã‚’ç”»åƒåŒ–ã—ã¦ã‚·ã‚§ã‚¢ã€‚

**ã‚·ã‚§ã‚¢å¯¾è±¡è¦ç´ **:

- æŠ•ç¨¿è€…æƒ…å ±ï¼ˆã‚¢ãƒã‚¿ãƒ¼ã€åå‰ã€ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ï¼‰
- æŠ•ç¨¿æœ¬æ–‡ï¼ˆçµµæ–‡å­—ã€ãƒªãƒ³ã‚¯å«ã‚€ï¼‰
- ã‚¹ãƒ†ãƒƒã‚«ãƒ¼ã€ãƒãƒ¼ã‚³ãƒ¼ãƒ‰
- ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³æ•°ï¼ˆã‚¹ãƒ†ãƒ©ã€ãƒªãƒ—ãƒ©ã‚¤ã€ãƒªãƒã‚¹ãƒˆï¼‰
- MY PACEã®ãƒ­ã‚´ãƒ»URLï¼ˆç”»åƒä¸‹éƒ¨ã«è¿½åŠ ï¼‰

**UIé…ç½®**:

- æŠ•ç¨¿ã‚«ãƒ¼ãƒ‰ã®ã‚·ã‚§ã‚¢ãƒ¡ãƒ‹ãƒ¥ãƒ¼å†…ã«ã€Œç”»åƒã¨ã—ã¦å…±æœ‰ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ 
- æ—¢å­˜ã®ã‚·ã‚§ã‚¢ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆURLã€Markdownç­‰ï¼‰ã¨ä¸¦åˆ—

### 2. ãƒ¯ãƒ¼ãƒ‰ãƒ­ãƒƒãƒˆåˆæˆãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ï¼ˆWordrot Synthesis Popupï¼‰

ãƒ¯ãƒ¼ãƒ‰ãƒ­ãƒƒãƒˆåˆæˆæˆåŠŸæ™‚ã®ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚’ç”»åƒåŒ–ã—ã¦ã‚·ã‚§ã‚¢ã€‚

**ã‚·ã‚§ã‚¢å¯¾è±¡è¦ç´ **:

- ã‚¿ã‚¤ãƒˆãƒ«ï¼ˆ"New Wordrot!" / "New Recipe!" / "Synthesis Complete!"ï¼‰
- åˆæˆçµæœã®ãƒ¯ãƒ¼ãƒ‰ã‚«ãƒ¼ãƒ‰ï¼ˆå¤§ï¼‰
- ãƒãƒƒã‚¸ï¼ˆNEW! / New Recipe!ï¼‰
- åˆæˆãƒ¬ã‚·ãƒ”ï¼ˆA - B + C = Resultï¼‰
- MY PACEã®ãƒ­ã‚´ãƒ»URLï¼ˆç”»åƒä¸‹éƒ¨ã«è¿½åŠ ï¼‰

**UIé…ç½®**:

- ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ä¸‹éƒ¨ã«å¹…åºƒã®ã‚·ã‚§ã‚¢ãƒœã‚¿ãƒ³ã‚’è¿½åŠ 
- ãƒœã‚¿ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ: ã€Œã“ã®ç™ºè¦‹ã‚’ã‚·ã‚§ã‚¢ã€ã€ŒShare your discovery!ã€ç­‰ã€å…±æœ‰ã—ãŸããªã‚‹è¡¨ç¾

## æŠ€è¡“ä»•æ§˜

### ç”»åƒåŒ–æ‰‹æ³•

**html2canvas**ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨:

```typescript
import html2canvas from 'html2canvas'

async function captureElement(elementId: string): Promise<Blob> {
  const element = document.getElementById(elementId)
  if (!element) throw new Error('Element not found')

  const canvas = await html2canvas(element, {
    backgroundColor: '#ffffff',
    scale: 2, // é«˜è§£åƒåº¦åŒ–
    logging: false,
    useCORS: true, // å¤–éƒ¨ç”»åƒã‚‚å–å¾—
  })

  return new Promise((resolve) => {
    canvas.toBlob((blob) => {
      if (blob) resolve(blob)
    }, 'image/png')
  })
}
```

### ã‚·ã‚§ã‚¢ãƒ•ãƒ­ãƒ¼

1. **ã‚­ãƒ£ãƒ—ãƒãƒ£æº–å‚™**
   - å¯¾è±¡è¦ç´ ã«ä¸€æ™‚çš„ãªã‚¯ãƒ©ã‚¹è¿½åŠ ï¼ˆã‚¹ã‚¿ã‚¤ãƒ«èª¿æ•´ç”¨ï¼‰
   - MY PACEãƒ­ã‚´ãƒ»URLè¦ç´ ã‚’è¿½åŠ 
2. **ç”»åƒç”Ÿæˆ**
   - `html2canvas`ã§è¦ç´ ã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£
   - PNGå½¢å¼ã§å‡ºåŠ›
3. **ãƒ­ã‚´ãƒ»URLå‰Šé™¤**
   - ã‚­ãƒ£ãƒ—ãƒãƒ£å¾Œã€ä¸€æ™‚è¦ç´ ã‚’å‰Šé™¤
4. **ã‚·ã‚§ã‚¢**
   - Web Share APIï¼ˆãƒ¢ãƒã‚¤ãƒ«ï¼‰ã¾ãŸã¯ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ï¼ˆãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ï¼‰
   - Xã€Blueskyã€Threadsç­‰ã¸ã®ç›´æ¥æŠ•ç¨¿ã‚‚æ¤œè¨

### Web Share APIå¯¾å¿œ

```typescript
async function shareImage(blob: Blob, url: string, text: string) {
  const file = new File([blob], 'mypace-share.png', { type: 'image/png' })

  if (navigator.share && navigator.canShare({ files: [file] })) {
    // Web Share API (ãƒ¢ãƒã‚¤ãƒ«)
    await navigator.share({
      files: [file],
      title: text,
      text: `${text}\n${url}`,
    })
  } else {
    // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯: ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
    const link = document.createElement('a')
    link.href = URL.createObjectURL(blob)
    link.download = 'mypace-share.png'
    link.click()
    URL.revokeObjectURL(link.href)
  }
}
```

### SNSåˆ¥ã‚·ã‚§ã‚¢å¯¾å¿œ

#### X (Twitter)

ç”»åƒä»˜ãæŠ•ç¨¿ç”¨URLç”Ÿæˆ:

```typescript
function shareToX(imageBlob: Blob, text: string, url: string) {
  // Xã¯ç”»åƒã‚’ç›´æ¥URLã«å«ã‚ã‚‰ã‚Œãªã„ãŸã‚ã€
  // 1) ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å¾Œã€ãƒ¡ãƒ‡ã‚£ã‚¢IDã‚’å–å¾—
  // 2) ãƒ†ã‚­ã‚¹ãƒˆ+URLã§æŠ•ç¨¿ç”»é¢ã‚’é–‹ã
  const tweetText = `${text}\n${url}`
  const xUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(tweetText)}`
  window.open(xUrl, '_blank')

  // ç”»åƒã¯åˆ¥é€”ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦æ‰‹å‹•æ·»ä»˜ã‚’ä¿ƒã™
  downloadImage(imageBlob)
}
```

#### Bluesky

```typescript
function shareToBluesky(imageBlob: Blob, text: string, url: string) {
  const bskyText = `${text}\n${url}`
  const bskyUrl = `https://bsky.app/intent/compose?text=${encodeURIComponent(bskyText)}`
  window.open(bskyUrl, '_blank')

  downloadImage(imageBlob)
}
```

#### Threads

```typescript
function shareToThreads(imageBlob: Blob, text: string, url: string) {
  const threadsText = `${text}\n${url}`
  const threadsUrl = `https://www.threads.net/intent/post?text=${encodeURIComponent(threadsText)}`
  window.open(threadsUrl, '_blank')

  downloadImage(imageBlob)
}
```

### ç”»åƒå†…ã®MY PACEæƒ…å ±è¿½åŠ 

ã‚­ãƒ£ãƒ—ãƒãƒ£å‰ã«ä¸€æ™‚çš„ã«ä»¥ä¸‹ã®è¦ç´ ã‚’è¿½åŠ :

```tsx
<div className="share-footer">
  <img src="/logo.svg" alt="MY PACE" className="share-logo" />
  <span className="share-url">mypace.jp</span>
</div>
```

CSS:

```css
.share-footer {
  display: none; /* é€šå¸¸ã¯éè¡¨ç¤º */
  padding: 1rem;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-size: 0.875rem;
  color: #666;
}

/* ã‚­ãƒ£ãƒ—ãƒãƒ£æ™‚ã®ã¿è¡¨ç¤º */
.capturing .share-footer {
  display: flex;
}

.share-logo {
  height: 20px;
}
```

## UIè¨­è¨ˆ

### æŠ•ç¨¿ã‚«ãƒ¼ãƒ‰ã®ã‚·ã‚§ã‚¢ãƒœã‚¿ãƒ³

æ—¢å­˜ã®ã‚·ã‚§ã‚¢ãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼ˆShareMenu.tsxï¼‰ã«è¿½åŠ :

```tsx
export type ShareOption =
  | 'url-copy'
  | 'url-nostr'
  | 'url-share'
  | 'md-copy'
  | 'md-download'
  | 'md-open'
  | 'x'
  | 'bluesky'
  | 'threads'
  | 'image-share' // æ–°è¦è¿½åŠ 
```

ãƒ¡ãƒ‹ãƒ¥ãƒ¼é …ç›®:

```
ğŸ“· ç”»åƒã¨ã—ã¦å…±æœ‰
```

### ãƒ¯ãƒ¼ãƒ‰ãƒ­ãƒƒãƒˆãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã®ã‚·ã‚§ã‚¢ãƒœã‚¿ãƒ³

ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ä¸‹éƒ¨ï¼ˆ"Tap anywhere to continue"ã®ä¸Šï¼‰ã«é…ç½®:

```tsx
<button className="word-synthesis-share-button" onClick={handleShare}>
  <Icon name="Share2" size={20} />
  <span>ã“ã®ç™ºè¦‹ã‚’ã‚·ã‚§ã‚¢</span>
</button>
```

CSS:

```css
.word-synthesis-share-button {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  padding: 0.75rem 2rem;
  margin: 1rem auto 0.5rem;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  border: none;
  border-radius: 12px;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition:
    transform 0.2s,
    box-shadow 0.2s;
  min-width: 200px;
}

.word-synthesis-share-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
}

.word-synthesis-share-button:active {
  transform: translateY(0);
}
```

## ã‚·ã‚§ã‚¢ãƒ†ã‚­ã‚¹ãƒˆæ¡ˆ

### æŠ•ç¨¿ã‚«ãƒ¼ãƒ‰

```
MY PACEã§æŠ•ç¨¿ã—ã¾ã—ãŸï¼
https://mypace.jp/post/{eventId}
```

### ãƒ¯ãƒ¼ãƒ‰ãƒ­ãƒƒãƒˆ

#### æ–°è¦ãƒ¯ãƒ¼ãƒ‰ç™ºè¦‹æ™‚

```
æ–°ã—ã„ãƒ¯ãƒ¼ãƒ‰ãƒ­ãƒƒãƒˆã€Œ{word}ã€ã‚’ç™ºè¦‹ã—ã¾ã—ãŸï¼
ãƒ¬ã‚·ãƒ”: {A} - {B} + {C}
https://mypace.jp/inventory?tab=wordrot&word={word}
```

#### æ–°è¦ãƒ¬ã‚·ãƒ”ç™ºè¦‹æ™‚

```
ã€Œ{word}ã€ã®æ–°ã—ã„ãƒ¬ã‚·ãƒ”ã‚’ç™ºè¦‹ã—ã¾ã—ãŸï¼
ãƒ¬ã‚·ãƒ”: {A} - {B} + {C}
https://mypace.jp/inventory?tab=wordrot&word={word}
```

#### æ—¢å­˜ãƒ¯ãƒ¼ãƒ‰åˆæˆæ™‚

```
ãƒ¯ãƒ¼ãƒ‰ãƒ­ãƒƒãƒˆã€Œ{word}ã€ã‚’åˆæˆã—ã¾ã—ãŸï¼
ãƒ¬ã‚·ãƒ”: {A} - {B} + {C}
https://mypace.jp/inventory?tab=wordrot&word={word}
```

## å®Ÿè£…å„ªå…ˆåº¦

1. **Phase 1**: ãƒ¯ãƒ¼ãƒ‰ãƒ­ãƒƒãƒˆãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã®ã‚·ã‚§ã‚¢æ©Ÿèƒ½
   - ç†ç”±: ã‚²ãƒ¼ãƒŸãƒ•ã‚£ã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¦ç´ ã¨ã—ã¦åŠ¹æœãŒé«˜ã„
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå…±æœ‰ã—ãŸããªã‚‹ç¬é–“ï¼ˆé”æˆæ„Ÿï¼‰ã‚’é€ƒã•ãªã„
2. **Phase 2**: æŠ•ç¨¿ã‚«ãƒ¼ãƒ‰ã®ã‚·ã‚§ã‚¢æ©Ÿèƒ½
   - ç†ç”±: ã‚ˆã‚Šåºƒç¯„ãªç”¨é€”ã«å¯¾å¿œ
   - æ—¢å­˜ã®ã‚·ã‚§ã‚¢ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã¸ã®è¿½åŠ ãŒå¿…è¦

## åˆ¶ç´„ãƒ»æ³¨æ„äº‹é …

- **å¤–éƒ¨ç”»åƒ**: `html2canvas`ã®CORSåˆ¶é™ã«ã‚ˆã‚Šã€å¤–éƒ¨ç”»åƒãŒå«ã¾ã‚Œã‚‹å ´åˆã¯æ­£ã—ãã‚­ãƒ£ãƒ—ãƒãƒ£ã•ã‚Œãªã„å¯èƒ½æ€§ã‚ã‚Š
  - å¯¾ç­–: ãƒ—ãƒ­ã‚­ã‚·çµŒç”±ã§ç”»åƒã‚’å–å¾—ã€ã¾ãŸã¯ã‚­ãƒ£ãƒ—ãƒãƒ£å‰ã«è­¦å‘Šè¡¨ç¤º
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: å¤§ããªæŠ•ç¨¿ã‚«ãƒ¼ãƒ‰ã®ã‚­ãƒ£ãƒ—ãƒãƒ£ã«ã¯æ™‚é–“ãŒã‹ã‹ã‚‹
  - å¯¾ç­–: ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤ºã€è§£åƒåº¦ã®èª¿æ•´ã‚ªãƒ—ã‚·ãƒ§ãƒ³
- **ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼**: å…¬é–‹ç¯„å›²ãŒé™å®šã•ã‚ŒãŸæŠ•ç¨¿ã¯ç”»åƒã‚·ã‚§ã‚¢ä¸å¯ã«ã™ã‚‹
  - å¯¾ç­–: è‡ªåˆ†ã®æŠ•ç¨¿ã®ã¿ã‚·ã‚§ã‚¢å¯èƒ½ã€ä»–ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æŠ•ç¨¿ã¯åˆ¶é™

## é–¢é€£ä»•æ§˜

- [stella.md](./stella.md) - ã‚¹ãƒ†ãƒ©è¡¨ç¤º
- [wordrot.md](./wordrot.md) - ãƒ¯ãƒ¼ãƒ‰ãƒ­ãƒƒãƒˆæ©Ÿèƒ½
- [repost.md](./repost.md) - ãƒªãƒã‚¹ãƒˆæ©Ÿèƒ½

---

[â† æ‹¡å¼µä»•æ§˜ä¸€è¦§ã«æˆ»ã‚‹](./index.md)
