# ピン留め投稿

プロフィールページの先頭に固定表示する投稿機能。

## 概要

自分の投稿を1つだけプロフィールページの最上部に固定できる。
訪問者に最初に見せたい投稿（自己紹介、代表作など）をピン留めする。

## UI

### ピンアイコン（カード外・中央上部）

プロフィールページの投稿カードに、カード外側の中央上部にピンアイコンが表示される。
`TimelinePostCard`の`topControls` propsとして渡され、共通スタイル（`post-card-top-controls`）で配置される。

| 状態 | 見える人 | 色 | 操作 |
|------|---------|-----|------|
| ピン済み | 全員 | 青（塗りつぶし） | オーナーのみクリック可 |
| 未ピン候補 | オーナーのみ | グレー | クリックでピン留め |

### ピン留めセクション

ピン留めされた投稿はタイムラインから分離され、先頭に「Pinned」ラベル付きで表示される。

```
| Pinned                           |  <- ラベル
|          [Pin Icon]              |  <- カード外・中央上部にピンアイコン
| +------------------------------+ |
| | ピン留めされた投稿           | |
| +------------------------------+ |
|                                  |
| 通常の投稿一覧...                |
+----------------------------------+
```

### 共通スタイル

ピンボタンとマガジン操作ボタンは`post-card-top-controls`という共通のスタイルを使用。
カードの外側に配置され、ホバー時に拡大するアニメーション付き。

## データ構造

### D1テーブル

```sql
CREATE TABLE user_pins (
  pubkey TEXT PRIMARY KEY,
  event_id TEXT NOT NULL,
  created_at INTEGER NOT NULL
);
```

- 1ユーザーにつき1投稿のみピン可能
- 新しくピンすると上書き

## API

### GET /api/pins/:pubkey

ユーザーのピン留め投稿IDを取得。

**レスポンス:**
```json
{
  "eventId": "abc123...",
  "createdAt": 1234567890
}
```

ピン留めがない場合:
```json
{
  "eventId": null
}
```

### POST /api/pins

ピン留めを設定。

**リクエスト:**
```json
{
  "pubkey": "hex_pubkey",
  "eventId": "event_id"
}
```

### DELETE /api/pins/:pubkey

ピン留めを解除。

## 制限

- ピン留めは1投稿のみ
- 自分の投稿のみピン可能
- 削除された投稿をピン留めしても表示されない（イベント取得失敗）

## 使用箇所

- **プロフィールページ**: UserView -> UserPosts
- メインタイムラインではピンボタンは表示されない

## 他クライアントとの互換性

ピン留め情報はMY PACEのD1データベースに保存されるため、他のNostrクライアントでは認識されない。
MY PACEのプロフィールページでのみピン留め投稿が先頭に表示される。
