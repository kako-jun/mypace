# FF14風チャットシステム

FF14の左下チャット機能のオマージュ。段階的に実装。

## チャンネル一覧

| チャンネル | FF14元ネタ | 優先度 | 実装方法 |
|-----------|-----------|--------|----------|
| Shout | シャウト | **Phase 1** | 投稿カードをトゲトゲ＋アニメーション |
| Tell | Tell | Phase 2 | NIP-04 暗号化DM |
| Party | パーティ | Phase 3 | 一時グループチャット |
| Linkshell | LS | Phase 4 | 小規模プライベートグループ（8人） |
| CWLS | CWLS | Phase 5 | クロスリレーグループ |
| FC | Free Company | Phase 6 | コミュニティ/ギルド |

---

## Phase 1: Shout（シャウト）

### 概要
投稿を「シャウト」として目立たせる機能。カードの輪郭をトゲトゲにして、定期的にアニメーションで注目を集める。

### タグ形式
```json
["shout", "true"]
```

### 表示スタイル
- **輪郭**: 通常の角丸→トゲトゲ（ジグザグ）のclip-path
- **アニメーション**: 数秒ごとに輝く/震える/色が変わるなど
- **色**: FF14のシャウトは黄色〜オレンジ系

### CSS実装案
```css
.post-card.shout {
  /* トゲトゲの輪郭 */
  clip-path: polygon(
    0% 10%, 5% 0%, 10% 10%, 15% 0%, 20% 10%, 25% 0%, 30% 10%, 35% 0%, 40% 10%, 45% 0%, 50% 10%, 55% 0%, 60% 10%, 65% 0%, 70% 10%, 75% 0%, 80% 10%, 85% 0%, 90% 10%, 95% 0%, 100% 10%,
    100% 90%, 95% 100%, 90% 90%, 85% 100%, 80% 90%, 75% 100%, 70% 90%, 65% 100%, 60% 90%, 55% 100%, 50% 90%, 45% 100%, 40% 90%, 35% 100%, 30% 90%, 25% 100%, 20% 90%, 15% 100%, 10% 90%, 5% 100%, 0% 90%
  );
  animation: shout-pulse 3s ease-in-out infinite;
}

@keyframes shout-pulse {
  0%, 100% { box-shadow: 0 0 0 0 rgba(255, 180, 0, 0); }
  50% { box-shadow: 0 0 20px 5px rgba(255, 180, 0, 0.6); }
}
```

### 投稿UI
- PostFormに「シャウト」トグルボタン追加
- ONにするとプレビューもトゲトゲ表示

### 使用制限（案）
- 連続シャウト防止: 10分に1回まで？
- またはZap必須にして経済的コスト

---

## 将来の拡張

### チャットウィンドウUI
- 左下に常駐するチャットログウィンドウ
- `/shout` `/tell @user` などのコマンド入力
- チャンネルごとの色分け

### チャンネル色（FF14準拠）
- Say: 白
- Shout: 黄色/オレンジ
- Tell: ピンク/マゼンタ
- Party: 水色
- FC: 緑
- LS: 黄緑

---

## 関連NIP
- NIP-04: Encrypted Direct Messages
- NIP-28: Public Chat Channels
- NIP-29: Relay-based Groups
